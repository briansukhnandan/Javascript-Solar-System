<!DOCTYPE html>

<html>

	<head>

		<meta charset="utf-8">
		<title>Testing Three.js</title>

		<style>
			body { margin: 0; }
			canvas { display: block; }
		</style>

	</head>

	<body>
		<script src="https://threejs.org/build/three.js"></script>
		<script src="js/examples/js/controls/OrbitControls.js"></script>
		<script>
			
			// Create new scene.
			let scene = new THREE.Scene();
			
			// Define a camera with a FOV of 100 deg, and an aspect ratio if width:height.
			// Also near/far clipping plane. Objects > far && Objects < near won't render.
			let camera = new THREE.PerspectiveCamera(
				50, (window.innerWidth / window.innerHeight), 0.1, 9000
			);

			// Add camera to scene.
			scene.add(camera);

			// Position camera at z=30 and look downwards at origin.
			camera.position.set(0,0,300);
			camera.lookAt(0,0,0);
			
			// Create renderer.
			let renderer = new THREE.WebGLRenderer();
			
			// Set size at which we render app.
			renderer.setSize(window.innerWidth, window.innerHeight);

			document.body.appendChild(renderer.domElement);

			// Orbit Controls - Allows us to zoom in/out and pan.
			let orbitControls = new THREE.OrbitControls(camera, renderer.domElement);

		/**
			*
			* Adding Skybox.
			*
		**/

			let materialArray = [];

			let texture_ft = new THREE.ImageUtils.loadTexture("images/star.jpg")
			let texture_bk = new THREE.ImageUtils.loadTexture("images/star.jpg")
			let texture_up = new THREE.ImageUtils.loadTexture("images/star.jpg")
			let texture_dn = new THREE.ImageUtils.loadTexture("images/star.jpg")
			let texture_rt = new THREE.ImageUtils.loadTexture("images/star.jpg")
			let texture_lf = new THREE.ImageUtils.loadTexture("images/star.jpg")

			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_ft }));
			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_bk }));
			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_up }));
			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_dn }));
			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_rt }));
			materialArray.push(new THREE.MeshBasicMaterial( { map: texture_lf }));

			for (let i = 0; i < 6; i++) {
				materialArray[i].side = THREE.BackSide;
			}

			let skyboxGeo = new THREE.BoxGeometry( 10000, 10000, 10000);
			let skybox = new THREE.Mesh( skyboxGeo, materialArray );
			scene.add( skybox );

		/**
			*
			* Create Earth Sphere
			*
		**/

			// Create sphere geometry with radius 8, and 25 width/height edges.
			let earth_sphere_geometry = new THREE.SphereGeometry(10, 25, 25);
			
			// Set material color/mapping.
            let earth_sphere_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/earth.jpg")
			});

			// Create the actual sphere object with the geometry and material we specified.
            let earth_sphere = new THREE.Mesh( earth_sphere_geometry, earth_sphere_material );

			earth_sphere.position.set(370,0,0);

			// Add the sphere to the scene.
            scene.add(earth_sphere);

		/**
			*
			* Create Moon Sphere - Attach to Earth
			*
		**/

			let moon_sphere_geometry = new THREE.SphereGeometry(3,25,25);

			let moon_sphere_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/moon.png")
			});

			let moon_sphere = new THREE.Mesh(moon_sphere_geometry, moon_sphere_material);

			// Set moon position as close to Earth initially. But we will add
			// it as Earth's child Object3D later.
			moon_sphere.position.set(20,5,-3);

		/**
			*
			* Create Sun Sphere - Parent of Earth
			*
		**/

			let sun_sphere_geometry = new THREE.SphereGeometry(100,30,30);

			let sun_sphere_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/sun.jpg")
			});

			let sun_sphere = new THREE.Mesh(sun_sphere_geometry, sun_sphere_material);

			sun_sphere.position.set(0,0,0);

		/**
			*
			* Create planet hierarchy: Sun -> Earth -> Moon
			*
		**/

			scene.add(sun_sphere);
			sun_sphere.add(earth_sphere);
			earth_sphere.add(moon_sphere);

		/**
			*
			* Create Pivot objects array.
			* POA[0] = Mercury
			* POA[1] = Venus
			* POA[2] = Mars
			* POA[3] = Jupiter
			* POA[4] = Saturn
			* POA[5] = Uranus
			* POA[6] = Neptune
			* POA[7] = Pluto
			*
		**/

			let PivotObjectsArray = [];

			// Each of the 8 pivot objects are initialized the same, but will differ in rotation.
			var i;
			for (i = 0; i < 8; i++) {

				let temp_geo = new THREE.SphereGeometry(1,1,1);
				let temp_material = new THREE.MeshBasicMaterial({
										color: 0x030303
									});

				PivotObjectsArray.push(new THREE.Mesh(temp_geo, temp_material));
				PivotObjectsArray[i].position.set(0,0,0);
			}

			for (i = 0; i < 8; i++) {
				scene.add(PivotObjectsArray[i]);
			}

		/**
			*
			* Adding Mercury (temp pivot obj + planet).
			*
		**/

			let mercury_geometry = new THREE.SphereGeometry(3.3,30,30);

			let mercury_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/mercury.jpg")
			});

			let mercury_sphere = new THREE.Mesh(mercury_geometry, mercury_material);

			mercury_sphere.position.set(170,0,0);

			PivotObjectsArray[0].add(mercury_sphere);

		/**
			*
			* Adding Venus (temp pivot obj + planet).
			*
		**/

			let venus_geometry = new THREE.SphereGeometry(9.5,30,30);

			let venus_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/venus.png")
			});

			let venus_sphere = new THREE.Mesh(venus_geometry, venus_material);

			venus_sphere.position.set(280,0,0);

			PivotObjectsArray[1].add(venus_sphere);


		/**
			*
			* Adding Mars (temp pivot obj + planet).
			*
		**/

			let mars_geometry = new THREE.SphereGeometry(9.5,30,30);

			let mars_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/mars.png")
			});

			let mars_sphere = new THREE.Mesh(mars_geometry, mars_material);

			mars_sphere.position.set(490,0,0);

			PivotObjectsArray[2].add(mars_sphere);

		/**
			*
			* Adding Mars Moons.
			*
		**/

			let MarsMoons = [];

			var i;
			for (i = 0; i < 2; i++) {
				
				let tmp_geometry = new THREE.SphereGeometry(3.1,30,30);
				
				let tmp_material = new THREE.MeshBasicMaterial({
					map: new THREE.ImageUtils.loadTexture("images/phobos.png")
									});

				MarsMoons.push(new THREE.Mesh(tmp_geometry, tmp_material))
				mars_sphere.add(MarsMoons[i]);
			}

			MarsMoons[0].position.set(20,5,-3);
			MarsMoons[1].position.set(17,8,5);

		/**
			*
			* Adding Jupiter (temp pivot obj + planet).
			*
		**/

			let jupiter_geometry = new THREE.SphereGeometry(45,30,30);

			let jupiter_material = new THREE.MeshBasicMaterial({
				map: new THREE.ImageUtils.loadTexture("images/jupiter.jpg")
			});

			let jupiter_sphere = new THREE.Mesh(jupiter_geometry, jupiter_material);

			jupiter_sphere.position.set(710,0,0);

			PivotObjectsArray[3].add(jupiter_sphere);

		/**
			*
			* Adding 10 of Jupiter's Moons.
			*
		**/

			let JupiterMoons = [];

			var i;
			for (i = 0; i < 10; i++) {
				
				let tmp_geometry = new THREE.SphereGeometry(3.5,30,30);
				
				let tmp_material = new THREE.MeshBasicMaterial({
					map: new THREE.ImageUtils.loadTexture("images/europa.jpg")
									});

				JupiterMoons.push(new THREE.Mesh(tmp_geometry, tmp_material))
				jupiter_sphere.add(JupiterMoons[i]);
			}

			JupiterMoons[0].position.set(72,5,-3);
			JupiterMoons[1].position.set(-97,-45,-5);
			JupiterMoons[2].position.set(90,-25,-12);
			JupiterMoons[3].position.set(-80,8,5);
			JupiterMoons[4].position.set(0,-70,-3);
			JupiterMoons[5].position.set(0,10,75);
			JupiterMoons[6].position.set(65,-10,65);
			JupiterMoons[7].position.set(0,10,-75);
			JupiterMoons[8].position.set(0,-20,-70);
			JupiterMoons[9].position.set(0,-20,75);


		/**
			*
			* Animate objects
			*
		**/

			function animate() {

				requestAnimationFrame(animate);
				renderer.render(scene, camera);
				render();

			}

		/**
			*
			* Render function to keep animate clutter free.
			*
		**/

			function render() {
				
				// Benchmark: 1 Earth year = 0.06.
				sun_sphere.rotation.y += 0.006;

				// Benchmark: 1 Earth day = 0.02
				earth_sphere.rotation.y += 0.02;
				moon_sphere.rotation.y += 0.2;

				// Planets
				mercury_sphere.rotation.y += .00034;
				venus_sphere.rotation.y += .000082;
				mars_sphere.rotation.y += .018;
				jupiter_sphere.rotation.y += .045;

				// Pivot Objects
				PivotObjectsArray[0].rotation.y += 0.024; // Mercury
				PivotObjectsArray[1].rotation.y += 0.009; // Venus
				PivotObjectsArray[2].rotation.y += 0.0035; // Mars
				PivotObjectsArray[3].rotation.y += 0.00054; // Jupiter
				PivotObjectsArray[4].rotation.y += 0.00020; // Saturn
				PivotObjectsArray[5].rotation.y += 0.00007; // Uranus
				PivotObjectsArray[6].rotation.y += 0.000035; // Neptune
				PivotObjectsArray[7].rotation.y += 0.000023; // Pluto

				// Mars Moon rotations
				MarsMoons[0].rotation.y += 0.2;
				MarsMoons[1].rotation.y += 0.2;

				// Jupiter Moon rotations
				var i;
				for (i = 0; i < 10; i++) {
					JupiterMoons[i].rotation.y += 0.4;
				}
				

			}

			function onWindowResize() {
				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();
				renderer.setSize( window.innerWidth, window.innerHeight );
			}

			animate();

		</script>
	</body>

</html>